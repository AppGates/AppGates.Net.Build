<Project>
  <PropertyGroup>
	 <!--this property seems not to exists in .net6 anymore.-->
    <ResolveCurrentProjectStaticWebAssetsInputsDependsOn>
      CompileTypeScript;
      $(ResolveCurrentProjectStaticWebAssetsInputs)
    </ResolveCurrentProjectStaticWebAssetsInputsDependsOn>
	  <TypeScriptRootDirectory Condition="'$(TypeScriptRootDirectory)' == ''">$(MSBuildProjectDirectory)\wwwroot\</TypeScriptRootDirectory>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.TypeScript.MSBuild" Version="*" PrivateAssets="all" />
  </ItemGroup>

	<PropertyGroup>
		<ResolveStaticWebAssetsInputsDependsOn>AddTsToContent;$(ResolveStaticWebAssetsInputsDependsOn)</ResolveStaticWebAssetsInputsDependsOn>
	</PropertyGroup>

	<!--by default compiled *.ts files are not included in the nuget package. But we want to add them so that we can debug into them from the consumer side.-->
	<Target Name="AddTypescriptFilesToContent"  BeforeTargets="ResolveProjectStaticWebAssets">
		<ItemGroup>
			<Content Include="@(TypeScriptCompile)" Exclude="@(Content)" />
		</ItemGroup>
	</Target>
  <Target Name="CopyTsConfigs" BeforeTargets="FindConfigFiles">
    <Copy Condition="Exists('$(TypeScriptRootDirectory)\tsconfig.json') == false"
          SourceFiles="$(MSBuildThisFileDirectory)\tsconfig.json"
          DestinationFolder="$(TypeScriptRootDirectory)" />

  </Target>
</Project>