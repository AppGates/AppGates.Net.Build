<Project>
  <PropertyGroup>
	 <!--this property seems not to exists in .net6 anymore.-->
    <ResolveCurrentProjectStaticWebAssetsInputsDependsOn>
      CompileTypeScript;
      $(ResolveCurrentProjectStaticWebAssetsInputs)
    </ResolveCurrentProjectStaticWebAssetsInputsDependsOn>
	  <TypeScriptRootDirectory Condition="'$(TypeScriptRootDirectory)' == ''">$(MSBuildProjectDirectory)\wwwroot\</TypeScriptRootDirectory>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.TypeScript.MSBuild" Version="*" PrivateAssets="all" />
  </ItemGroup>


	<!--[Add Typescript files to the RCL package]: by default compiled *.ts files are not included in the nuget package. But we want to add them so that we can debug into them from the consumer side.-->
	<PropertyGroup>
		<ResolveStaticWebAssetsInputsDependsOn>AddTypescriptFilesToContent;$(ResolveStaticWebAssetsInputsDependsOn)</ResolveStaticWebAssetsInputsDependsOn>
	</PropertyGroup>

	<Target Name="AddTypescriptFilesToContent"  BeforeTargets="ResolveProjectStaticWebAssets">
		<ItemGroup>
			<None Include="@(TypeScriptCompile)" Exclude="@(None)" />
			<!--<Content Include="@(TypeScriptCompile)" Exclude="@(Content)"
					 ExcludeFromSingleFile="true" CopyToPublishDirectory="PreserveNewest"/>
	
			<None Update="@(None)"
				   ExcludeFromSingleFile="true" CopyToPublishDirectory="PreserveNewest"/>-->
		</ItemGroup>
	</Target>
	<!--End - [Add Typescript files to the RCL package]-->


	<Target Name="CopyTsConfigs" BeforeTargets="FindConfigFiles">
    <Copy Condition="Exists('$(TypeScriptRootDirectory)\tsconfig.json') == false"
          SourceFiles="$(MSBuildThisFileDirectory)\tsconfig.json"
          DestinationFolder="$(TypeScriptRootDirectory)" />

  </Target>
</Project>